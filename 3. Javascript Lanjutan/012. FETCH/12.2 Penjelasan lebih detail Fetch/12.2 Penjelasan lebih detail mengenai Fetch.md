# 🚀 Dokumentasi Fetch API JavaScript

> **Panduan lengkap untuk memahami Fetch API - Method modern untuk mengambil resources dari jaringan**

[![JavaScript](https://img.shields.io/badge/JavaScript-ES6+-yellow.svg)](https://developer.mozilla.org/en-US/docs/Web/JavaScript)
[![Fetch API](https://img.shields.io/badge/Fetch%20API-Promise--based-blue.svg)](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)
[![Asynchronous](https://img.shields.io/badge/Async-Promise-green.svg)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)

---

## 📚 Daftar Isi

- [🤔 Pengertian Fetch API](#-pengertian-fetch-api)
- [📝 Syntax Dasar Fetch](#-syntax-dasar-fetch)
- [🎯 Resources Parameter](#-resources-parameter)
  - [URL](#url)
  - [Request Object](#request-object)
- [⚙️ Init Parameter (Konfigurasi)](#️-init-parameter-konfigurasi)
  - [Method](#method)
  - [Headers](#headers)
  - [Body](#body)
  - [Mode](#mode)
  - [Cache](#cache)
  - [Referrer](#referrer)
  - [ReferrerPolicy](#referrerpolicy)
  - [Integrity](#integrity)
  - [Keepalive](#keepalive)
  - [Signal](#signal)
- [📤 Response Object](#-response-object)
  - [Response Properties](#response-properties)
  - [Response Methods](#response-methods)
- [💡 Contoh Implementasi Lengkap](#-contoh-implementasi-lengkap)

---

## 🤔 Pengertian Fetch API

**Fetch API** adalah sebuah method pada API JavaScript untuk mengambil resources dari jaringan, dan mengembalikan **Promise** yang selesai (fulfilled) ketika ada response yang tersedia.

### Karakteristik Utama:
- ✅ **Promise-based** - Mengembalikan Promise
- ✅ **Asynchronous** - Non-blocking operation
- ✅ **Modern** - Pengganti XMLHttpRequest
- ✅ **Network-focused** - Khusus untuk network requests

---

## 📝 Syntax Dasar Fetch

```javascript
fetch(resources, init)
```

### Parameter:
- **`resources`** → URL atau Request Object
- **`init`** → Konfigurasi tambahan (optional)

### Contoh Sederhana:

```javascript
// Contoh dasar fetch
fetch('https://jsonplaceholder.typicode.com/posts/1')
  .then(response => response.json())
  .then(data => console.log(data));
```

**Output:**
```javascript
{
  "userId": 1,
  "id": 1,
  "title": "sunt aut facere repellat provident occaecati excepturi optio reprehenderit",
  "body": "quia et suscipit..."
}
```

---

## 🎯 Resources Parameter

### URL

Alamat dari sumber yang akan diambil.

```javascript
// Contoh menggunakan URL string
const url = 'https://jsonplaceholder.typicode.com/users';

fetch(url)
  .then(response => response.json())
  .then(users => {
    console.log('Jumlah users:', users.length);
    console.log('User pertama:', users[0].name);
  });
```

**Output:**
```
Jumlah users: 10
User pertama: Leanne Graham
```

### Request Object

Representasi permintaan sumber yang lebih kompleks.

```javascript
// Contoh menggunakan Request Object
const request = new Request('https://jsonplaceholder.typicode.com/posts', {
  method: 'GET',
  headers: {
    'Content-Type': 'application/json'
  }
});

fetch(request)
  .then(response => {
    console.log('Status:', response.status);
    console.log('Content-Type:', response.headers.get('content-type'));
    return response.json();
  })
  .then(posts => {
    console.log('Jumlah posts:', posts.length);
  });
```

**Output:**
```
Status: 200
Content-Type: application/json; charset=utf-8
Jumlah posts: 100
```

---

## ⚙️ Init Parameter (Konfigurasi)

Konfigurasi tambahan pada sebuah request berbentuk object.

### Method

HTTP method yang akan digunakan.

```javascript
// Contoh POST request
fetch('https://jsonplaceholder.typicode.com/posts', {
  method: 'POST',
  body: JSON.stringify({
    title: 'Judul Post Baru',
    body: 'Isi dari post baru',
    userId: 1
  }),
  headers: {
    'Content-Type': 'application/json'
  }
})
.then(response => response.json())
.then(data => {
  console.log('Post berhasil dibuat dengan ID:', data.id);
  console.log('Judul:', data.title);
});
```

**Output:**
```
Post berhasil dibuat dengan ID: 101
Judul: Judul Post Baru
```

### Headers

Informasi tambahan yang dikirim dengan request.

```javascript
// Contoh dengan custom headers
fetch('https://jsonplaceholder.typicode.com/posts/1', {
  method: 'GET',
  headers: {
    'Accept': 'application/json',
    'User-Agent': 'MyApp/1.0',
    'Authorization': 'Bearer token123'
  }
})
.then(response => {
  console.log('Request headers berhasil dikirim');
  console.log('Response status:', response.status);
  return response.json();
})
.then(data => console.log('Data diterima:', data.title));
```

**Output:**
```
Request headers berhasil dikirim
Response status: 200
Data diterima: sunt aut facere repellat provident occaecati excepturi optio reprehenderit
```

### Body

Data yang dikirim dalam request (untuk POST, PUT, PATCH).

```javascript
// Contoh dengan body JSON
const newUser = {
  name: 'Ahmad Pratama',
  email: 'ahmad@example.com',
  username: 'ahmadpratama'
};

fetch('https://jsonplaceholder.typicode.com/users', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify(newUser)
})
.then(response => response.json())
.then(user => {
  console.log('User baru dibuat:');
  console.log('ID:', user.id);
  console.log('Nama:', user.name);
  console.log('Email:', user.email);
});
```

**Output:**
```
User baru dibuat:
ID: 11
Nama: Ahmad Pratama
Email: ahmad@example.com
```

### Mode

Mode request (cors, no-cors, same-origin).

```javascript
// Contoh dengan mode cors
fetch('https://api.github.com/users/octocat', {
  mode: 'cors',
  method: 'GET'
})
.then(response => {
  console.log('CORS mode berhasil');
  console.log('Response type:', response.type);
  return response.json();
})
.then(data => {
  console.log('GitHub user:', data.login);
  console.log('Public repos:', data.public_repos);
});
```

**Output:**
```
CORS mode berhasil
Response type: cors
GitHub user: octocat
Public repos: 8
```

### Cache

Strategi caching untuk request.

```javascript
// Contoh dengan cache strategy
fetch('https://jsonplaceholder.typicode.com/posts/1', {
  cache: 'no-cache',
  method: 'GET'
})
.then(response => {
  console.log('Cache strategy: no-cache');
  console.log('Response fresh from server');
  return response.json();
})
.then(data => console.log('Fresh data:', data.id));
```

**Output:**
```
Cache strategy: no-cache
Response fresh from server
Fresh data: 1
```

### Referrer

Informasi referrer untuk request.

```javascript
// Contoh dengan custom referrer
fetch('https://jsonplaceholder.typicode.com/posts', {
  referrer: 'https://mywebsite.com',
  method: 'GET'
})
.then(response => {
  console.log('Referrer berhasil diset');
  console.log('Status:', response.status);
  return response.json();
})
.then(posts => console.log('Jumlah posts:', posts.length));
```

**Output:**
```
Referrer berhasil diset
Status: 200
Jumlah posts: 100
```

### ReferrerPolicy

Kebijakan referrer yang akan digunakan.

```javascript
// Contoh dengan referrer policy
fetch('https://jsonplaceholder.typicode.com/users', {
  referrerPolicy: 'no-referrer-when-downgrade',
  method: 'GET'
})
.then(response => {
  console.log('Referrer policy applied');
  return response.json();
})
.then(users => console.log('Users loaded:', users.length));
```

**Output:**
```
Referrer policy applied
Users loaded: 10
```

### Integrity

Validasi integritas response menggunakan hash.

```javascript
// Contoh dengan integrity check (konseptual)
fetch('https://jsonplaceholder.typicode.com/posts/1', {
  method: 'GET',
  integrity: 'sha256-example-hash'
})
.catch(error => {
  console.log('Integrity check might fail:', error.message);
})
.then(response => {
  if (response) {
    console.log('Integrity check passed');
    return response.json();
  }
});
```

**Output:**
```
Integrity check might fail: Failed to fetch
```

### Keepalive

Menjaga koneksi tetap hidup setelah page unload.

```javascript
// Contoh dengan keepalive
function sendAnalytics() {
  fetch('/analytics', {
    method: 'POST',
    keepalive: true,
    body: JSON.stringify({
      event: 'page_view',
      timestamp: Date.now()
    })
  });
  console.log('Analytics sent with keepalive');
}

// Biasanya digunakan saat page unload
window.addEventListener('beforeunload', sendAnalytics);
```

**Output:**
```
Analytics sent with keepalive
```

### Signal

AbortController signal untuk membatalkan request.

```javascript
// Contoh dengan abort signal
const controller = new AbortController();
const signal = controller.signal;

// Batalkan request setelah 5 detik
setTimeout(() => {
  controller.abort();
  console.log('Request dibatalkan setelah 5 detik');
}, 5000);

fetch('https://jsonplaceholder.typicode.com/posts', {
  signal: signal
})
.then(response => response.json())
.then(data => console.log('Data berhasil dimuat:', data.length))
.catch(error => {
  if (error.name === 'AbortError') {
    console.log('Request berhasil dibatalkan');
  }
});
```

**Output:**
```
Request dibatalkan setelah 5 detik
Request berhasil dibatalkan
```

---

## 📤 Response Object

Hasil dari fetch, berupa Promise yang resolve menjadi Response object.

### Response Properties

```javascript
fetch('https://jsonplaceholder.typicode.com/posts/1')
.then(response => {
  console.log('=== RESPONSE PROPERTIES ===');
  console.log('headers:', response.headers);
  console.log('ok:', response.ok);
  console.log('redirected:', response.redirected);
  console.log('status:', response.status);
  console.log('statusText:', response.statusText);
  console.log('type:', response.type);
  console.log('url:', response.url);
  console.log('body:', response.body);
  
  return response.json();
});
```

**Output:**
```
=== RESPONSE PROPERTIES ===
headers: Headers {}
ok: true
redirected: false
status: 200
statusText: OK
type: cors
url: https://jsonplaceholder.typicode.com/posts/1
body: ReadableStream
```

### Response Methods

#### clone()

```javascript
fetch('https://jsonplaceholder.typicode.com/posts/1')
.then(response => {
  const clonedResponse = response.clone();
  
  console.log('Original response status:', response.status);
  console.log('Cloned response status:', clonedResponse.status);
  
  return response.json();
})
.then(data => console.log('Data from original:', data.id));
```

**Output:**
```
Original response status: 200
Cloned response status: 200
Data from original: 1
```

#### json()

```javascript
fetch('https://jsonplaceholder.typicode.com/posts/1')
.then(response => response.json())
.then(data => {
  console.log('=== JSON METHOD ===');
  console.log('Type:', typeof data);
  console.log('Title:', data.title);
  console.log('User ID:', data.userId);
});
```

**Output:**
```
=== JSON METHOD ===
Type: object
Title: sunt aut facere repellat provident occaecati excepturi optio reprehenderit
User ID: 1
```

#### text()

```javascript
fetch('https://jsonplaceholder.typicode.com/posts/1')
.then(response => response.text())
.then(text => {
  console.log('=== TEXT METHOD ===');
  console.log('Type:', typeof text);
  console.log('Length:', text.length);
  console.log('First 100 chars:', text.substring(0, 100));
});
```

**Output:**
```
=== TEXT METHOD ===
Type: string
Length: 292
First 100 chars: {
  "userId": 1,
  "id": 1,
  "title": "sunt aut facere repellat provident occaecati excepturi opt
```

#### blob()

```javascript
// Contoh mengambil gambar sebagai blob
fetch('https://via.placeholder.com/150')
.then(response => response.blob())
.then(blob => {
  console.log('=== BLOB METHOD ===');
  console.log('Type:', blob.type);
  console.log('Size:', blob.size, 'bytes');
  
  // Membuat URL untuk blob
  const imageUrl = URL.createObjectURL(blob);
  console.log('Blob URL created:', imageUrl.substring(0, 50) + '...');
});
```

**Output:**
```
=== BLOB METHOD ===
Type: image/png
Size: 8234 bytes
Blob URL created: blob:null/a1b2c3d4-e5f6-7890-abcd-ef1234567890...
```

#### formData()

```javascript
// Contoh dengan form data (simulasi)
const formData = new FormData();
formData.append('name', 'Ahmad');
formData.append('email', 'ahmad@example.com');

fetch('https://httpbin.org/post', {
  method: 'POST',
  body: formData
})
.then(response => response.json())
.then(data => {
  console.log('=== FORM DATA RESPONSE ===');
  console.log('Form data received:', data.form);
});
```

**Output:**
```
=== FORM DATA RESPONSE ===
Form data received: {
  name: "Ahmad",
  email: "ahmad@example.com"
}
```

---

## 💡 Contoh Implementasi Lengkap

```javascript
// Fungsi utility untuk fetch dengan error handling
async function fetchData(url, options = {}) {
  try {
    console.log(`🚀 Fetching data from: ${url}`);
    
    const response = await fetch(url, {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
        'Accept': 'application/json'
      },
      cache: 'default',
      mode: 'cors',
      ...options
    });
    
    console.log(`📊 Response status: ${response.status} ${response.statusText}`);
    console.log(`✅ Response OK: ${response.ok}`);
    console.log(`🔗 Final URL: ${response.url}`);
    
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    
    const data = await response.json();
    console.log(`📦 Data received:`, data);
    
    return data;
    
  } catch (error) {
    console.error(`❌ Fetch error:`, error.message);
    throw error;
  }
}

// Implementasi penggunaan
async function demonstrateFeatures() {
  try {
    // 1. GET Request
    console.log('\n=== GET REQUEST ===');
    const post = await fetchData('https://jsonplaceholder.typicode.com/posts/1');
    
    // 2. POST Request
    console.log('\n=== POST REQUEST ===');
    const newPost = await fetchData('https://jsonplaceholder.typicode.com/posts', {
      method: 'POST',
      body: JSON.stringify({
        title: 'Belajar Fetch API',
        body: 'Ini adalah contoh post baru',
        userId: 1
      })
    });
    
    // 3. Error Handling
    console.log('\n=== ERROR HANDLING ===');
    try {
      await fetchData('https://jsonplaceholder.typicode.com/posts/99999');
    } catch (error) {
      console.log('Error berhasil ditangani:', error.message);
    }
    
  } catch (error) {
    console.error('Demonstration failed:', error);
  }
}

// Jalankan demonstrasi
demonstrateFeatures();
```

**Output:**
```
=== GET REQUEST ===
🚀 Fetching data from: https://jsonplaceholder.typicode.com/posts/1
📊 Response status: 200 OK
✅ Response OK: true
🔗 Final URL: https://jsonplaceholder.typicode.com/posts/1
📦 Data received: {userId: 1, id: 1, title: "sunt aut facere...", body: "quia et suscipit..."}

=== POST REQUEST ===
🚀 Fetching data from: https://jsonplaceholder.typicode.com/posts
📊 Response status: 201 Created
✅ Response OK: true
🔗 Final URL: https://jsonplaceholder.typicode.com/posts
📦 Data received: {title: "Belajar Fetch API", body: "Ini adalah contoh post baru", userId: 1, id: 101}

=== ERROR HANDLING ===
🚀 Fetching data from: https://jsonplaceholder.typicode.com/posts/99999
📊 Response status: 404 Not Found
✅ Response OK: false
❌ Fetch error: HTTP error! status: 404
Error berhasil ditangani: HTTP error! status: 404
```

---

## 🎯 Kesimpulan

Fetch API menyediakan interface yang powerful dan fleksibel untuk melakukan network requests dengan:

- **Promise-based architecture** untuk async operations
- **Konfigurasi lengkap** melalui init parameter
- **Response handling** yang comprehensive
- **Error handling** yang robust
- **Modern JavaScript features** support

Dengan memahami setiap parameter dan method yang tersedia, Anda dapat menggunakan Fetch API secara optimal untuk berbagai kebutuhan network communication dalam aplikasi JavaScript modern.

---

<div align="center">
  <strong>🚀 Happy Coding with Fetch API!</strong><br>
  <em>Dokumentasi lengkap untuk implementasi network requests modern</em>
</div>
