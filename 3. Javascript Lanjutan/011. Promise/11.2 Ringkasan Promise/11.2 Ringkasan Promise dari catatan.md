# 🚀 JavaScript Promise - Panduan Lengkap

> Dokumentasi lengkap untuk memahami JavaScript Promise dari dasar hingga penggunaan lanjutan

![JavaScript Promise](https://img.shields.io/badge/JavaScript-ES6+-yellow?style=for-the-badge&logo=javascript)
![Promise](https://img.shields.io/badge/Promise-Async%2FAwait-blue?style=for-the-badge)
![Status](https://img.shields.io/badge/Status-Complete-green?style=for-the-badge)

---

## 📋 Daftar Isi

- [🔍 Pengenalan Promise](#-pengenalan-promise)
- [⚡ Perbandingan XMLHttpRequest vs Fetch](#-perbandingan-xmlhttprequest-vs-fetch)
- [🎯 Apa itu Promise?](#-apa-itu-promise)
- [📝 Contoh Dasar Promise](#-contoh-dasar-promise)
- [⏰ Promise dengan Asynchronous](#-promise-dengan-asynchronous)
- [🔄 Promise.all()](#-promiseall)
- [📊 Destructuring Promise Results](#-destructuring-promise-results)

---

## 🔍 Pengenalan Promise

Promise adalah fitur JavaScript yang memungkinkan kita menangani operasi asynchronous dengan lebih mudah dan rapi. Sebelum Promise, kita biasanya menggunakan callback yang bisa menyebabkan "callback hell".

---

## ⚡ Perbandingan XMLHttpRequest vs Fetch

### 🔧 Menggunakan XMLHttpRequest (Cara Lama)

```javascript
// versi ajax vanilla javascript
const xhr = new XMLHttpRequest();

xhr.onreadystatechange = function () {
  if (xhr.status === 200) {
    if (xhr.readyState === 4) {
      console.log(JSON.parse(xhr.response));
    }
  } else {
    console.log(xhr.responseText);
  }
};

xhr.open('get', 'http://www.omdbapi.com/?apikey=b2a155c4&s=avenger');
xhr.send();
```

**Output:**
```javascript
{
  "Search": [
    {
      "Title": "The Avengers",
      "Year": "2012",
      "imdbID": "tt0848228",
      // ... data film lainnya
    }
  ],
  "totalResults": "100",
  "Response": "True"
}
```

### ✨ Menggunakan Fetch (Cara Modern)

#### ❌ Fetch Tanpa Promise Handler
```javascript
const movies = fetch('http://www.omdbapi.com/?apikey=b2a155c4&s=avenger');
console.log(movies);
```

**Output:**
```javascript
Promise {<pending>}
```
> ⚠️ **Catatan**: Hasil ini bukan data movie yang diharapkan, melainkan object Promise!

#### ✅ Fetch dengan Promise Handler
```javascript
// formatnya, fetch()
// parameternya url yang akan digunakan
fetch('http://www.omdbapi.com/?apikey=b2a155c4&s=avenger')
// ketika sukses mengambil data 'api' menggunakan .then()
// karena fetch menghasilkan promise, maka menggunakan method json()
  .then((results) => results.json())
// baru di tampilkan data movie-movie nya
  .then((results) => console.log(results));
```

**Output:**
```javascript
{
  "Search": [
    {
      "Title": "The Avengers",
      "Year": "2012",
      "imdbID": "tt0848228",
      "Type": "movie",
      "Poster": "https://..."
    }
    // ... data film lainnya
  ],
  "totalResults": "100",
  "Response": "True"
}
```

---

## 🎯 Apa itu Promise?

> **Promise adalah sebuah OBJECT yang merepresentasikan keberhasilan/kegagalan dari sebuah event yang asynchronous di masa yang akan datang**

### 🏷️ Konsep Promise
- **Promise** berarti **JANJI**
- Kadang **JANJI** (kadang terpenuhi kadang juga ingkar)
- Di JavaScript, ada **state**:
  - ✅ **fulfilled** (terpenuhi)
  - ❌ **rejected** (ingkar)
  - ⏳ **pending** (waktu tunggu sebelum janjinya terpenuhi atau ingkar)

### 🔧 Fungsi Callback Promise
- `resolve` → ketika janjinya terpenuhi
- `reject` → ketika janjinya tidak terpenuhi/diingkari
- `finally` → ketika waktu tunggunya selesai

### 📝 Method Promise
- `.then()` → menjalankan resolve (kalau terpenuhi)
- `.catch()` → menjalankan reject (kalau tidak terpenuhi)

---

## 📝 Contoh Dasar Promise

### ✅ Promise yang Terpenuhi

```javascript
// contoh 1
let ditepati = true;

const janji1 = new Promise((resolve, reject) => {
  if (ditepati) {
    resolve('janji telah ditepati');
  } else {
    reject('janji tidak ditepati');
  }
});

console.log(janji1);
```

**Output:**
```javascript
Promise {<fulfilled>: 'janji telah ditepati'}
```

### ❌ Promise yang Tidak Terpenuhi

```javascript
// contoh 1
let ditepati = false;

const janji1 = new Promise((resolve, reject) => {
  if (ditepati) {
    resolve('janji telah ditepati');
  } else {
    reject('janji tidak ditepati');
  }
});

console.log(janji1);
```

**Output:**
```javascript
Promise {<rejected>: 'janji tidak ditepati'}
```

### 🎭 Menggunakan .then() dan .catch()

```javascript
// membuat ditepati agar true
let ditepati = true;

// variabel 1 menampung sebuah object Promise (new digunakan karena ini membuat object khusus baru Promise)
// berisi 2 parameter misal resolve(ketika janji dipenuhi) dan reject(ketika janji tidak terpenuhi)
const janji1 = new Promise((resolve, reject) => {
  if (ditepati) {
    // ketika janji terpenuhi
    resolve('janji telah ditepati');
  } else {
    // ketika janji tidak terpenuhi
    reject('janji tidak ditepati');
  }
});

janji1
  // aksi jika janji terpenuhi menggunakan .then() dan berisi callback menampilkan ok + response
  .then((response) => {
    console.log('OK!!!' + response);
  })
  // aksi jika janji tidak terpenuhi menggunakan .catch() dan berisi callback menampilkan not ok + response
  .catch((response) => {
    console.log('NOT OK!!!' + response);
  });
```

**Output:**
```javascript
OK!!!janji telah ditepati
```

---

## ⏰ Promise dengan Asynchronous

### ⏳ Promise dengan setTimeout (Pending State)

```javascript
// contoh 2
let ditepati = true;

const janji2 = new Promise((resolve, reject) => {
  if (ditepati) {
    // menunggu 3 detik dulu baru dieksekusi
    setTimeout(() => {
      resolve('Ditepati setelah beberapa waktu');
    }, 3000);
  } else {
    // menunggu 3 detik dulu baru dieksekusi
    setTimeout(() => {
      reject('Tidak ditepati setelah beberapa waktu');
    }, 3000);
  }
});

console.log('mulai');
console.log(janji2);
console.log('selesai');
```

**Output:**
```javascript
mulai
Promise {<pending>}
selesai
```

> ⚠️ **Catatan**: Hasilnya masih pending karena kita belum menjalankan `.then()` atau `.catch()`

### ✅ Promise dengan Handler Lengkap

```javascript
let ditepati = true;

const janji2 = new Promise((resolve, reject) => {
  if (ditepati) {
    // menunggu 3 detik dulu baru dieksekusi
    setTimeout(() => {
      resolve('Ditepati setelah beberapa waktu');
    }, 3000);
  } else {
    // menunggu 3 detik dulu baru dieksekusi
    setTimeout(() => {
      reject('Tidak ditepati setelah beberapa waktu');
    }, 3000);
  }
});

console.log('mulai');

janji2
  // apapun isi variabel ditepati, finally() dijalanin dulu
  .finally(() => console.log('selesai menunggu'))
  // kalau janji ditepati menggunakan .then()
  .then(() => console.log(janji2))
  // kalau janji tidak ditepati menggunakan .catch()
  .catch(() => console.log(janji2));

console.log('selesai');
```

**Output:**
```javascript
mulai
selesai
// ... menunggu 3 detik ...
selesai menunggu
Promise {<fulfilled>: 'Ditepati setelah beberapa waktu'}
```

---

## 🔄 Promise.all()

> Dalam Promise ada method `.all()` untuk menjalankan ketika punya banyak promise mau dijalankan sekaligus

### 📚 Contoh Multiple Promise

```javascript
// Promise.all()

const film = new Promise((resolve) => {
  setTimeout(() => {
    resolve([
      {
        judul: 'Avenger',
        sutradara: 'Ahmad',
        pemeran: 'budi, dani',
      },
    ]);
  }, 1000);
});

const cuaca = new Promise((resolve) => {
  setTimeout(() => {
    resolve([
      {
        kota: 'Semarang',
        tmp: 26,
        kondisi: 'Cerah berawan',
      },
    ]);
  }, 500);
});

film.then((response) => console.log(response));
cuaca.then((response) => console.log(response));
```

**Output:**
```javascript
// Setelah 500ms:
[{kota: 'Semarang', tmp: 26, kondisi: 'Cerah berawan'}]

// Setelah 1000ms:
[{judul: 'Avenger', sutradara: 'Ahmad', pemeran: 'budi, dani'}]
```

### 🎯 Menggunakan Promise.all()

```javascript
Promise.all([film, cuaca]).then((response) => console.log(response));
```

**Output:**
```javascript
[
  [{judul: 'Avenger', sutradara: 'Ahmad', pemeran: 'budi, dani'}],
  [{kota: 'Semarang', tmp: 26, kondisi: 'Cerah berawan'}]
]
```

> ⚠️ **Catatan**: Hasilnya masih berbentuk array

---

## 📊 Destructuring Promise Results

### 🎨 Menggunakan Destructuring Array

```javascript
Promise.all([film, cuaca]).then((response) => {
  const [film, cuaca] = response;

  console.log(film);
  console.log(cuaca);
});
```

**Output:**
```javascript
[{judul: 'Avenger', sutradara: 'Ahmad', pemeran: 'budi, dani'}]
[{kota: 'Semarang', tmp: 26, kondisi: 'Cerah berawan'}]
```

---

## 🎉 Kesimpulan

Promise adalah cara modern dan efektif untuk menangani operasi asynchronous di JavaScript. Dengan memahami konsep:

- ✅ **State Promise**: pending, fulfilled, rejected
- 🔧 **Method Promise**: .then(), .catch(), .finally()
- 🚀 **Promise.all()**: untuk multiple promise
- 🎯 **Destructuring**: untuk mengakses hasil array

Anda dapat menulis kode JavaScript yang lebih bersih dan mudah dipahami!

---

## 📚 Referensi

- [MDN Web Docs - Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)
- [JavaScript.info - Promises](https://javascript.info/promise-basics)

---

<div align="center">

**📝 Made with ❤️ for JavaScript Learning**

</div>
