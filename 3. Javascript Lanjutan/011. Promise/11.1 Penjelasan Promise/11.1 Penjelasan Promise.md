# 🚀 JavaScript Promise - Panduan Lengkap untuk Pemula

[![JavaScript](https://img.shields.io/badge/JavaScript-ES6+-yellow.svg)](https://developer.mozilla.org/en-US/docs/Web/JavaScript)
[![Promise](https://img.shields.io/badge/Promise-Asynchronous-blue.svg)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)
[![Level](https://img.shields.io/badge/Level-Pemula-green.svg)](https://github.com)

> **Promise** adalah sebuah object yang merepresentasikan keberhasilan atau kegagalan dari sebuah event asynchronous di masa yang akan datang.

---

## 📋 Daftar Isi

- [🎯 Pengenalan Promise](#-pengenalan-promise)
- [🔄 Perbandingan XMLHttpRequest vs Fetch](#-perbandingan-xmlhttprequest-vs-fetch)
- [📚 Konsep Dasar Promise](#-konsep-dasar-promise)
- [🛠️ Membuat Promise Sederhana](#%EF%B8%8F-membuat-promise-sederhana)
- [⏰ Promise dengan setTimeout](#-promise-dengan-settimeout)
- [🎭 Method .finally()](#-method-finally)
- [🚀 Promise.all()](#-promiseall)
- [📖 Kesimpulan](#-kesimpulan)

---

## 🎯 Pengenalan Promise

Promise dalam JavaScript adalah seperti **"janji"** dalam kehidupan nyata. Kadang janji bisa ditepati, kadang juga bisa diingkari, dan kadang kita masih menunggu keputusannya.

### 🔍 State dalam Promise:
- **`pending`** - Sedang menunggu (waktu tunggu sebelum janji terpenuhi atau tidak)
- **`fulfilled`** - Janji terpenuhi (berhasil)
- **`rejected`** - Janji diingkari (gagal)

---

## 🔄 Perbandingan XMLHttpRequest vs Fetch

### 📜 Cara Lama - XMLHttpRequest

```javascript
// Versi ajax vanilla javascript
const xhr = new XMLHttpRequest();

xhr.onreadystatechange = function () {
  if (xhr.status === 200) {
    if (xhr.readyState === 4) {
      console.log(JSON.parse(xhr.response));
    }
  } else {
    console.log(xhr.responseText);
  }
};

xhr.open('get', 'http://www.omdbapi.com/?apikey=b2a155c4&s=avenger');
xhr.send();
```

**Output:**
```javascript
// Menampilkan data film Avenger dari OMDB API
{
  "Search": [
    {
      "Title": "The Avengers",
      "Year": "2012",
      "imdbID": "tt0848228",
      "Type": "movie",
      "Poster": "https://..."
    }
    // ... data film lainnya
  ],
  "totalResults": "169",
  "Response": "True"
}
```

### ✨ Cara Baru - Fetch (Return Promise)

```javascript
const movies = fetch('http://www.omdbapi.com/?apikey=b2a155c4&s=avenger');
console.log(movies);
```

**Output:**
```javascript
// Hasilnya bukan data movie, tapi Promise object
Promise {<pending>}
```

### 🎯 Cara yang Benar - Menggunakan .then()

```javascript
fetch('http://www.omdbapi.com/?apikey=b2a155c4&s=avenger')
  .then((results) => results.json())
  .then((results) => console.log(results));
```

**Output:**
```javascript
// Sekarang data movie berhasil ditampilkan
{
  "Search": [
    {
      "Title": "The Avengers",
      "Year": "2012",
      "imdbID": "tt0848228",
      "Type": "movie"
    }
    // ... data lengkap
  ]
}
```

---

## 📚 Konsep Dasar Promise

Promise memiliki 3 fungsi callback penting:

| Fungsi | Deskripsi |
|--------|-----------|
| `resolve` | Dipanggil ketika janji terpenuhi |
| `reject` | Dipanggil ketika janji tidak terpenuhi |
| `finally` | Dipanggil setelah waktu tunggu selesai |

### 🔧 Method untuk Menangani Promise:

| Method | Fungsi |
|--------|--------|
| `.then()` | Menjalankan resolve (ketika berhasil) |
| `.catch()` | Menjalankan reject (ketika gagal) |
| `.finally()` | Dijalankan apapun hasilnya |

---

## 🛠️ Membuat Promise Sederhana

### ✅ Contoh 1: Janji yang Ditepati

```javascript
let ditepati = true;

const janji1 = new Promise((resolve, reject) => {
  if (ditepati) {
    resolve('janji telah ditepati');
  } else {
    reject('janji tidak ditepati');
  }
});

console.log(janji1);
```

**Output:**
```javascript
Promise {<fulfilled>: 'janji telah ditepati'}
```

### ❌ Contoh 2: Janji yang Tidak Ditepati

```javascript
let ditepati = false;

const janji1 = new Promise((resolve, reject) => {
  if (ditepati) {
    resolve('janji telah ditepati');
  } else {
    reject('janji tidak ditepati');
  }
});

console.log(janji1);
```

**Output:**
```javascript
Promise {<rejected>: 'janji tidak ditepati'}
```

### 🎯 Menggunakan .then() dan .catch()

```javascript
let ditepati = true;

const janji1 = new Promise((resolve, reject) => {
  if (ditepati) {
    resolve('janji telah ditepati');
  } else {
    reject('janji tidak ditepati');
  }
});

janji1
  .then((response) => {
    console.log('OK! ' + response);
  })
  .catch((response) => {
    console.log('NOT OK! ' + response);
  });
```

**Output:**
```javascript
"OK! janji telah ditepati"
```

---

## ⏰ Promise dengan setTimeout

### 🕐 Contoh dengan Delay

```javascript
let ditepati = true;

const janji2 = new Promise((resolve, reject) => {
  if (ditepati) {
    setTimeout(() => {
      resolve('Ditepati setelah beberapa waktu');
    }, 3000);
  } else {
    setTimeout(() => {
      reject('Tidak ditepati setelah beberapa waktu');
    }, 3000);
  }
});

console.log('mulai');
console.log(janji2);
console.log('selesai');
```

**Output:**
```javascript
"mulai"
Promise {<pending>}
"selesai"
// Status masih pending karena belum menggunakan .then() atau .catch()
```

---

## 🎭 Method .finally()

```javascript
let ditepati = true;

const janji2 = new Promise((resolve, reject) => {
  if (ditepati) {
    setTimeout(() => {
      resolve('Ditepati setelah beberapa waktu');
    }, 3000);
  } else {
    setTimeout(() => {
      reject('Tidak ditepati setelah beberapa waktu');
    }, 3000);
  }
});

console.log('mulai');

janji2
  .finally(() => console.log('selesai menunggu'))
  .then(() => console.log(janji2))
  .catch(() => console.log(janji2));

console.log('selesai');
```

**Output:**
```javascript
"mulai"
"selesai"
// Setelah 3 detik:
"selesai menunggu"
Promise {<fulfilled>: 'Ditepati setelah beberapa waktu'}
```

---

## 🚀 Promise.all()

Method `Promise.all()` digunakan untuk menjalankan beberapa Promise secara bersamaan.

### 🎬 Contoh dengan Multiple Promise

```javascript
const film = new Promise((resolve) => {
  setTimeout(() => {
    resolve([
      {
        judul: 'Avenger',
        sutradara: 'Ahmad',
        pemeran: 'budi, dani',
      },
    ]);
  }, 1000);
});

const cuaca = new Promise((resolve) => {
  setTimeout(() => {
    resolve([
      {
        kota: 'Semarang',
        tmp: 26,
        kondisi: 'Cerah berawan',
      },
    ]);
  }, 500);
});

// Menjalankan satu per satu
film.then((response) => console.log(response));
cuaca.then((response) => console.log(response));
```

**Output:**
```javascript
// Setelah 500ms:
[{kota: 'Semarang', tmp: 26, kondisi: 'Cerah berawan'}]

// Setelah 1000ms:
[{judul: 'Avenger', sutradara: 'Ahmad', pemeran: 'budi, dani'}]
```

### 📦 Menggunakan Promise.all()

```javascript
Promise.all([film, cuaca]).then((response) => console.log(response));
```

**Output:**
```javascript
// Setelah 1000ms (menunggu promise terlama):
[
  [{judul: 'Avenger', sutradara: 'Ahmad', pemeran: 'budi, dani'}],
  [{kota: 'Semarang', tmp: 26, kondisi: 'Cerah berawan'}]
]
```

### 🎯 Menggunakan Destructuring

```javascript
Promise.all([film, cuaca]).then((response) => {
  const [dataFilm, dataCuaca] = response;
  
  console.log('Data Film:', dataFilm);
  console.log('Data Cuaca:', dataCuaca);
});
```

**Output:**
```javascript
"Data Film:" 
[{judul: 'Avenger', sutradara: 'Ahmad', pemeran: 'budi, dani'}]

"Data Cuaca:" 
[{kota: 'Semarang', tmp: 26, kondisi: 'Cerah berawan'}]
```

---

## 📖 Kesimpulan

Promise adalah fitur powerful dalam JavaScript untuk menangani operasi asynchronous. Dengan memahami konsep dasar:

- ✅ **Promise** seperti janji yang bisa terpenuhi atau tidak
- ✅ **State**: `pending`, `fulfilled`, `rejected`
- ✅ **Method**: `.then()`, `.catch()`, `.finally()`
- ✅ **Promise.all()** untuk multiple promise

Promise membuat kode asynchronous lebih mudah dibaca dan dipelihara dibandingkan callback tradisional.

---


### 📚 Referensi

- [MDN Web Docs - Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)
- [JavaScript.info - Promise](https://javascript.info/promise-basics)

---

<div align="center">
  <sub>Dibuat dengan ❤️ untuk pembelajaran JavaScript Indonesia</sub>
</div>
